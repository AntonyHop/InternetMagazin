@using InternetMagazine.PL.DTO;
@using InternetMagazine.PL.Services;
@{
    ViewBag.Title = "Статистика";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1>Статистика:</h1>
</div>

<div class="row col-md-12">
    @if (ViewBag.CountProducts != null)
    {
        <div class="col-md-6">
            <h3>Количество продуктов: @ViewBag.CountProducts</h3>
        </div>
    }
  
    @if (ViewBag.CountOrders != null)
    {
        <div class="col-md-6">
            <h3>Количество заказов: @ViewBag.CountOrders</h3>
        </div>
    }
    @if (ViewBag.CountUsers != null)
    {
        <div class="col-md-6">
            <h3>Количество пользователей: @ViewBag.CountUsers</h3>
        </div>
    }
    @if (ViewBag.CountCategories != null)
    {
        <div class="col-md-6">
            <h3>Количество категорий: @ViewBag.CountCategories</h3>
        </div>
    }

    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>Топ самых продаваемых товаров</h2>
    </div>
       
    <table class="table  table-bordered">
        <tr>
            <th>
                Название товара
            </th>
            <th>
                Автор
            </th>
            <th>
                Описание
            </th>
            <th>
                Цена
            </th>
            <th>
                Количество заказов
            </th>
       
        </tr>

        @foreach (ProductDTO item in ViewBag.StatPeriod)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Author)
                </td>
                <td>
                    @CategoryService.CutText(item.Desc)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
              
                <td>
                    @Html.DisplayFor(modelItem => item.CountOfpay)
                </td>
               
            </tr>
        }

    </table>
        
        

</div>